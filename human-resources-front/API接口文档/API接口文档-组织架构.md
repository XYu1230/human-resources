# 组织架构管理模块接口文档

## 基础信息

- 基础URL: `/api`
- 请求头: Content-Type: application/json
- 响应格式: JSON

## 通用响应格式

```json
{
  "code": 200,       // 状态码，200表示成功，非200表示失败
  "message": "操作成功", // 提示信息
  "data": {}        // 响应数据，具体格式根据接口而定
}
```

## 接口列表

### 1. 获取组织架构树

- **接口描述**: 获取完整的组织架构树
- **请求方法**: GET
- **请求URL**: `/organization/tree`
- **请求参数**: 

| 参数名 | 类型 | 是否必须 | 描述 |
| ------ | ---- | -------- | ---- |
| companyId | Long | 是 | 企业ID |

- **响应示例**:

```json
{
  "code": 200,
  "message": "操作成功",
  "data": [
    {
      "id": 1,
      "name": "总公司",
      "parentId": 0,
      "level": 1,
      "companyId": 1,
      "status": 1,
      "children": [
        {
          "id": 2,
          "name": "人力资源部",
          "parentId": 1,
          "level": 2,
          "companyId": 1,
          "status": 1,
          "children": []
        }
      ]
    }
  ]
}
```

### 2. 获取组织架构节点详情

- **接口描述**: 根据ID获取组织架构节点详情
- **请求方法**: GET
- **请求URL**: `/organization/{id}`
- **路径参数**:

| 参数名 | 类型 | 是否必须 | 描述 |
| ------ | ---- | -------- | ---- |
| id | Long | 是 | 节点ID |

- **响应示例**:

```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "name": "总公司",
    "parentId": 0,
    "level": 1,
    "companyId": 1,
    "status": 1
  }
}
```

### 3. 新增组织架构节点

- **接口描述**: 新增组织架构节点
- **请求方法**: POST
- **请求URL**: `/organization`
- **请求参数**:

| 参数名 | 类型 | 是否必须 | 描述 |
| ------ | ---- | -------- | ---- |
| name | String | 是 | 组织名称，最大长度100 |
| parentId | Long | 否 | 父节点ID，0表示顶级节点 |
| companyId | Long | 是 | 所属企业ID |
| status | Integer | 是 | 状态，1-启用，0-禁用 |

- **请求示例**:

```json
{
  "name": "新组织",
  "parentId": 1,
  "companyId": 1,
  "status": 1
}
```

- **响应示例**:

```json
{
  "code": 200,
  "message": "新增成功",
  "data": {
    "id": 3
  }
}
```

### 4. 更新组织架构节点

- **接口描述**: 更新组织架构节点信息
- **请求方法**: PUT
- **请求URL**: `/organization/{id}`
- **路径参数**:

| 参数名 | 类型 | 是否必须 | 描述 |
| ------ | ---- | -------- | ---- |
| id | Long | 是 | 节点ID |

- **请求参数**:

| 参数名 | 类型 | 是否必须 | 描述 |
| ------ | ---- | -------- | ---- |
| name | String | 是 | 组织名称，最大长度100 |
| parentId | Long | 否 | 父节点ID，0表示顶级节点 |
| status | Integer | 是 | 状态，1-启用，0-禁用 |

- **请求示例**:

```json
{
  "name": "更新后的组织名称",
  "parentId": 1,
  "status": 1
}
```

- **响应示例**:

```json
{
  "code": 200,
  "message": "更新成功",
  "data": null
}
```

### 5. 删除组织架构节点

- **接口描述**: 根据ID删除组织架构节点（如果节点下有子节点，则不允许删除）
- **请求方法**: DELETE
- **请求URL**: `/organization/{id}`
- **路径参数**:

| 参数名 | 类型 | 是否必须 | 描述 |
| ------ | ---- | -------- | ---- |
| id | Long | 是 | 节点ID |

- **响应示例**:

```json
{
  "code": 200,
  "message": "删除成功",
  "data": null
}
```

### 6. 更新组织架构节点状态

- **接口描述**: 更新组织架构节点状态（启用/禁用）
- **请求方法**: PUT
- **请求URL**: `/organization/{id}/status`
- **路径参数**:

| 参数名 | 类型 | 是否必须 | 描述 |
| ------ | ---- | -------- | ---- |
| id | Long | 是 | 节点ID |

- **请求参数**:

| 参数名 | 类型 | 是否必须 | 描述 |
| ------ | ---- | -------- | ---- |
| status | Integer | 是 | 状态，1-启用，0-禁用 |

- **请求示例**:

```json
{
  "status": 0
}
```

- **响应示例**:

```json
{
  "code": 200,
  "message": "状态更新成功",
  "data": null
}
```

## 错误码说明

| 错误码 | 描述 |
| ------ | ---- |
| 200 | 成功 |
| 400 | 请求参数错误 |
| 401 | 未授权 |
| 403 | 权限不足 |
| 404 | 资源不存在 |
| 409 | 资源冲突 |
| 500 | 服务器内部错误 |